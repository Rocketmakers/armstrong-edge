import{r as l}from"./index-Cqyox1Tj.js";import{b as K,c as oe}from"./useDidUpdateEffect-igSykUWQ.js";import{j as Q}from"./jsx-runtime-Cl2eCCBe.js";import{_ as z}from"./extends-CF3RwP-h.js";import"./index-QqxU7g3h.js";import{c as ae}from"./index-Dv9et24K.js";import{u as le}from"./config.context-B61qZkrf.js";function Ie(e,t){return e.reduce((r,a,s)=>t(a)?s:r,-1)}function Fe(e,t){const r=[];for(let a=0;a<e;a+=1)r.push(a);return r.map(t)}function se(e){const t=[];for(const r of e)t.includes(r)||t.push(r);return t}function ue(e,t){return l.useMemo(()=>{var r;return se([...t??[],...((r=e==null?void 0:e.myValidationErrors)==null?void 0:r.map(a=>a.message))??[]])},[t,e==null?void 0:e.myValidationErrors])}function De(e,t){var h,V,v,R,E,x;const r=l.useMemo(()=>{var c,p,i;return(t==null?void 0:t.value)??((i=(p=(c=e==null?void 0:e.bindConfig)==null?void 0:c.format)==null?void 0:p.fromData)==null?void 0:i.call(p,e.value))??(e==null?void 0:e.value)},[t==null?void 0:t.value,(h=e==null?void 0:e.bindConfig)==null?void 0:h.format,e==null?void 0:e.value]),a=l.useCallback(c=>{var p,i,d,S,T;c!==void 0&&((p=t==null?void 0:t.onChange)==null||p.call(t,c)),(T=e==null?void 0:e.setValue)==null||T.call(e,((S=(d=(i=e.bindConfig)==null?void 0:i.format)==null?void 0:d.toData)==null?void 0:S.call(d,c))??c)},[e,t]),s=l.useCallback(c=>{var p,i,d;return((d=(i=(p=e==null?void 0:e.bindConfig)==null?void 0:p.format)==null?void 0:i.fromData)==null?void 0:d.call(i,c))??c},[(V=e==null?void 0:e.bindConfig)==null?void 0:V.format]),f=l.useCallback(c=>{var p,i,d;return((d=(i=(p=e==null?void 0:e.bindConfig)==null?void 0:p.format)==null?void 0:i.toData)==null?void 0:d.call(i,c))??c},[(v=e==null?void 0:e.bindConfig)==null?void 0:v.format]),u=ue(e,t==null?void 0:t.validationErrorMessages),m=(t==null?void 0:t.validationMode)??((R=e==null?void 0:e.formConfig)==null?void 0:R.validationMode)??"both",g=(t==null?void 0:t.validationErrorIcon)??((E=e==null?void 0:e.formConfig)==null?void 0:E.validationErrorIcon);return[r,a,{getFormattedValueFromData:s,getFormattedValueToData:f,validationErrorMessages:u,isTouched:(e==null?void 0:e.isTouched)??!1,setTouched:c=>e==null?void 0:e.setTouched(c),validate:(c,p)=>{var i;return(e==null?void 0:e.validate(c,p,(i=e==null?void 0:e.bindConfig)==null?void 0:i.autoValidateAll))??!0},isValid:((e==null?void 0:e.isValid)??!0)&&!u.length,validationMode:m,validationErrorIcon:g,shouldShowValidationErrorIcon:m==="icon"||m==="both",shouldShowValidationErrorMessage:m==="message"||m==="both",autoValidate:(t==null?void 0:t.autoValidate)??((x=e==null?void 0:e.formConfig)==null?void 0:x.autoValidate)}]}function _(e,t){return t!=null&&t.length?t.reduce((r,a)=>r==null?void 0:r[a],e??{}):e}function ne(e,t,r){if(t.length===0){if(Array.isArray(r))return[...r];if(typeof r=="object")return{...r}}const a=Array.isArray(e)||Number.isInteger(t[0])?[...e||[]]:{...e||{}};let s=a;for(let f=0;f<t.length;f+=1){const u=t[f];f===t.length-1?Array.isArray(r)?s[u]=[...r]:typeof r=="object"?s[u]={...r}:s[u]=r:Array.isArray(s[u])?(s[u]=[...s[u]],s=s[u]):typeof s[u]=="object"?(s[u]={...s[u]},s=s[u]):Number.isInteger(u)?(s[u]=[...s[u]],s=s[u]):(s[u]={...s[u]},s=s[u])}return a}function j(e,t){if(e&&!Array.isArray(e))throw new Error(`"${t}" cannot be used on a set form property that does not contain an array value, the current value of this property is: ${JSON.stringify(e)}`);return!0}function N(e,t){switch(t){case"dots":return(e==null?void 0:e.filter(r=>!!r).join("."))??"";case"brackets":return(e==null?void 0:e.reduce((r,a)=>typeof a=="string"?`${r}${r?".":""}${a}`:typeof a=="number"?`${r}[${a}]`:r,""))??"";default:throw new Error(`Unsupported mode: ${t} sent to validation key factory`)}}function G(e,...t){return e?t.some(r=>r===e||e.indexOf(`${r}.`)===0||e.indexOf(`${r}[`)===0):!0}const L=(e,t)=>e.filter(r=>G(r,N(t,"dots"))),ce=(e,t)=>{switch(t.type){case"set-touched":if(t.touched){const r=N(t.keyChain,"dots");return e.includes(r)?e:[...e.filter(a=>a!==r),r]}{const r=L(e,t.keyChain);return e.some(a=>r.includes(a))?e.filter(a=>!r.includes(a)):e}case"reset-touched":return[];default:return e}};function W(e=[],t=[]){if(!t.length)return[];const r=N(t,"dots"),a=N(t,"brackets");return e.filter(s=>G(s.key,r,a))}function fe(e,t){switch(t.type){case"add-validation":return[...e,...t.errors];case"clear-validation":return e.filter(r=>{var a,s;return!((!t.key||t.key===r.key)&&(!((a=t.identifiers)!=null&&a.length)||(s=t.identifiers)!=null&&s.some(f=>f===r.identifier)))});default:return e}}const me=(e,t)=>e.filter(r=>t?G(N(r.path,"dots"),t):!0).map(r=>({key:N(r.path,"dots"),message:r.message})),ie=(e,t,r,a,s,f,u,m,g,h,V,v,R)=>{var J;const E=K(V),x=K(h),[c,p]=l.useState(!1),i=l.useCallback((o,n)=>{o.length===1?r({type:"set-one",propertyKey:o[0],value:n}):r({type:"set-path",keyChain:o,value:n})},[r]);l.useEffect(()=>{p(!1)},[v]);const d=l.useCallback((...o)=>{s({type:"add-validation",errors:o})},[s]),S=l.useCallback((o,n,$)=>{const w=Array.isArray(n)?n:[n],A=N(o,"dots");d(...w.map(y=>({key:A,message:y,identifier:$})))},[d]),T=l.useCallback((...o)=>{s({type:"clear-validation",identifiers:o.length?o:void 0})},[s]),I=l.useCallback((o,n)=>{const $=N(o,"dots"),w=N(o,"brackets");s({type:"clear-validation",key:$,identifiers:n}),s({type:"clear-validation",key:w,identifiers:n})},[s]),F=l.useCallback((o,n,$)=>{if(j(n,"formProp.add")){const w=[...n??[]];w.push($),r({type:"set-path",keyChain:o,value:w})}},[r]),B=l.useCallback((o,n,$)=>{if(j(n,"formProp.remove")){const w=[...n??[]];w.splice($,1),r({type:"set-path",keyChain:o,value:w})}},[r]),H=l.useCallback((o,n,$,w)=>{if(j(n,"formProp.insert")){const A=[...n??[]];A.splice($,0,w),r({type:"set-path",keyChain:o,value:A})}},[r]),O=l.useCallback((o,n)=>{if(j(n,"formProp.pop")){const $=[...n??[]];$.pop(),r({type:"set-path",keyChain:o,value:$})}},[r]),P=l.useCallback((o,n)=>{m({type:"set-touched",keyChain:o,touched:n})},[m]),q=l.useMemo(()=>[...a,...(E==null?void 0:E.validationErrors)??[]],[a,E==null?void 0:E.validationErrors]),U=l.useCallback((o,n)=>{const $=L(f,o),w=W(q,o);return{value:_(e,o),setValue:A=>i(o,A),bindConfig:n,formConfig:E,myValidationErrors:w,dispatch:r,keyChain:o,fullKeyChain:o,initialValue:_(x,o),addValidationError:(A,y)=>S(o,A,y),clearClientValidationErrors:(...A)=>I(o,A),setTouched:A=>P(o,A),isTouched:!!$.length||c||!!v,myTouchedState:$,clientValidationDispatcher:s,touchedStateDispatcher:m,allTouched:c,validate:(A=!0,y=!1,D=!1)=>(A&&P(o,!0),g(D?void 0:o,y)),isValid:!w.length,parseValidationSchema:g}},[f,q,e,E,r,R,x,c,v,s,m,g,i,S,I,P]),k=l.useCallback((o=!0,n=!1)=>(o&&p(!0),g([],n)),[g,p]),M=l.useCallback((...o)=>{const n=_(t.current,o),$=L(u.current,o),w=W(q,o);return{bind:y=>U(o,y),set:y=>(i(o,y),M(...o)),clear:()=>(i(o,void 0),M(...o)),get:()=>n,add:y=>(F(o,n,y),M(...o)),pop:()=>(O(o,n),M(...o)),insert:(y,D)=>(H(o,n,D,y),M(...o)),remove:y=>(B(o,n,y),M(...o)),addValidationError:(y,D)=>(S(o,y,D),M(...o)),clearClientValidationErrors:(...y)=>(I(o,y),M(...o)),validate:(y=!0,D=!1)=>(y&&P(o,!0),g(o,D)),isTouched:!!$.length||c||!!v,setTouched:y=>(P(o,y),M(...o)),isValid:!w.length}},[t,u,c,v,q,U,i,F,O,H,B,S,I,g,P]),b=l.useCallback(()=>t.current,[t]),ee=l.useCallback(()=>{r({type:"set-all",data:x})},[x,r]),te=l.useCallback(o=>r({type:"set-all",data:o}),[r]),re=l.useCallback(()=>{p(!1),m({type:"reset-touched"})},[m]);return{formState:e,formProp:M,resetFormData:ee,getFormData:b,setFormData:te,clearClientValidationErrors:T,addValidationError:d,validate:k,touchAll:()=>p(!0),allTouched:c,isValid:!a.length&&!((J=E==null?void 0:E.validationErrors)!=null&&J.length)&&g(void 0,!0),resetTouchedState:re}};function X(e){return typeof e=="function"}function pe(e,t){switch(t.type){case"set-one":return Array.isArray(e)||Number.isInteger(t.propertyKey)?(e||[]).map((r,a)=>a===t.propertyKey?t.value:e[a]):{...e||{},[t.propertyKey]:t.value};case"set-path":return ne(e,t.keyChain,t.value);case"set-all":return Array.isArray(t.data)?[...t.data]:{...t.data};default:return e}}function Pe(e,t){const r=K(e),[a,s]=l.useState(X(r)?r():r??{}),[f,u]=l.useReducer(fe,[]),[m,g]=l.useState([]),h=l.useRef(a),V=l.useRef(m),v=l.useMemo(()=>X(r)?r(h.current):r??{},[r]),R=K(v),E=l.useCallback(d=>(h.current=pe(h.current,d),s(h.current),h.current),[s]),x=l.useCallback(d=>(V.current=ce(V.current,d),g(V.current),V.current),[g]);oe(()=>{E({type:"set-all",data:R})},[R]);const c=l.useMemo(()=>{},[t==null?void 0:t.validationSchema,a]),p=l.useCallback((d=[],S)=>{if(!c)throw new Error("No validation schema has been provided");const T=d.length?N(d,"dots"):void 0;S||u({type:"clear-validation",key:T});const I=c.safeParse(h.current??{});let F=[];return I.success||(F=me(I.error.errors,T),F.length&&!S&&u({type:"add-validation",errors:F})),!F.length},[c,u,h,t==null?void 0:t.logSchemaErrors]);return ie(a,h,E,f,u,m,V,x,(d,S)=>c?p(d,S):!0,R,t)}function de(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function ye(...e){return t=>e.forEach(r=>de(r,t))}const Y=l.forwardRef((e,t)=>{const{children:r,...a}=e,s=l.Children.toArray(r),f=s.find($e);if(f){const u=f.props.children,m=s.map(g=>g===f?l.Children.count(u)>1?l.Children.only(null):l.isValidElement(u)?u.props.children:null:g);return l.createElement(Z,z({},a,{ref:t}),l.isValidElement(u)?l.cloneElement(u,void 0,m):null)}return l.createElement(Z,z({},a,{ref:t}),r)});Y.displayName="Slot";const Z=l.forwardRef((e,t)=>{const{children:r,...a}=e;return l.isValidElement(r)?l.cloneElement(r,{...ge(a,r.props),ref:t?ye(t,r.ref):r.ref}):l.Children.count(r)>1?l.Children.only(null):null});Z.displayName="SlotClone";const Ee=({children:e})=>l.createElement(l.Fragment,null,e);function $e(e){return l.isValidElement(e)&&e.type===Ee}function ge(e,t){const r={...t};for(const a in t){const s=e[a],f=t[a];/^on[A-Z]/.test(a)?s&&f?r[a]=(...m)=>{f(...m),s(...m)}:s&&(r[a]=s):a==="style"?r[a]={...s,...f}:a==="className"&&(r[a]=[s,f].filter(Boolean).join(" "))}return{...e,...r}}const we=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ae=we.reduce((e,t)=>{const r=l.forwardRef((a,s)=>{const{asChild:f,...u}=a,m=f?Y:t;return l.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),l.createElement(m,z({},u,{ref:s}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),he=l.forwardRef((e,t)=>l.createElement(Ae.label,z({},e,{ref:t,onMouseDown:r=>{var a;(a=e.onMouseDown)===null||a===void 0||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault()}}))),Se=he,C=l.forwardRef(({required:e,className:t,requiredIndicator:r,children:a,displaySize:s,...f},u)=>{const m=le({inputDisplaySize:s,requiredIndicator:r});return Q.jsxs(Se,{className:ae("arm-label",t),ref:u,"data-size":m.inputDisplaySize,...f,children:[a,e&&Q.jsxs("span",{className:"arm-label-required-indicator",children:[" ",m.requiredIndicator]})]})});C.displayName="Label";C.__docgenInfo={description:"Render a status icon which can either be pending or errored",methods:[],displayName:"Label",props:{required:{required:!1,tsType:{name:"boolean"},description:"Should the label show a required indicator?"},requiredIndicator:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:'Symbol to use as the required indicator, defaults to "*"'},displaySize:{required:!1,tsType:{name:"union",raw:"'small' | 'medium' | 'large' | CustomString",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'large'"},{name:"literal",value:"`custom-${string}`"}]},description:"which size variant to use"}},composes:["Omit"]};export{C as L,De as a,Ie as f,Fe as r,Pe as u};
