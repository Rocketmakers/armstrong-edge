function K(t){return t.split("-")[1]}function ut(t){return t==="y"?"height":"width"}function F(t){return t.split("-")[0]}function j(t){return["top","bottom"].includes(F(t))?"x":"y"}function gt(t,e,n){let{reference:o,floating:r}=t;const i=o.x+o.width/2-r.width/2,l=o.y+o.height/2-r.height/2,a=j(e),s=ut(a),c=o[s]/2-r[s]/2,p=a==="x";let f;switch(F(e)){case"top":f={x:i,y:o.y-r.height};break;case"bottom":f={x:i,y:o.y+o.height};break;case"right":f={x:o.x+o.width,y:l};break;case"left":f={x:o.x-r.width,y:l};break;default:f={x:o.x,y:o.y}}switch(K(e)){case"start":f[a]-=c*(n&&p?-1:1);break;case"end":f[a]+=c*(n&&p?-1:1)}return f}const Wt=async(t,e,n)=>{const{placement:o="bottom",strategy:r="absolute",middleware:i=[],platform:l}=n,a=i.filter(Boolean),s=await(l.isRTL==null?void 0:l.isRTL(e));let c=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:p,y:f}=gt(c,o,s),m=o,d={},h=0;for(let u=0;u<a.length;u++){const{name:g,fn:w}=a[u],{x:y,y:x,data:R,reset:v}=await w({x:p,y:f,initialPlacement:o,placement:m,strategy:r,middlewareData:d,rects:c,platform:l,elements:{reference:t,floating:e}});p=y??p,f=x??f,d={...d,[g]:{...d[g],...R}},v&&h<=50&&(h++,typeof v=="object"&&(v.placement&&(m=v.placement),v.rects&&(c=v.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):v.rects),{x:p,y:f}=gt(c,m,s)),u=-1)}return{x:p,y:f,placement:m,strategy:r,middlewareData:d}};function M(t,e){return typeof t=="function"?t(e):t}function At(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function et(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function Q(t,e){var n;e===void 0&&(e={});const{x:o,y:r,platform:i,rects:l,elements:a,strategy:s}=t,{boundary:c="clippingAncestors",rootBoundary:p="viewport",elementContext:f="floating",altBoundary:m=!1,padding:d=0}=M(e,t),h=At(d),u=a[m?f==="floating"?"reference":"floating":f],g=et(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(u)))==null||n?u:u.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:c,rootBoundary:p,strategy:s})),w=f==="floating"?{...l.floating,x:o,y:r}:l.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),x=await(i.isElement==null?void 0:i.isElement(y))&&await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1},R=et(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:w,offsetParent:y,strategy:s}):w);return{top:(g.top-R.top+h.top)/x.y,bottom:(R.bottom-g.bottom+h.bottom)/x.y,left:(g.left-R.left+h.left)/x.x,right:(R.right-g.right+h.right)/x.x}}const U=Math.min,X=Math.max;function ct(t,e,n){return X(t,U(e,n))}const Xt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:r,rects:i,platform:l,elements:a}=e,{element:s,padding:c=0}=M(t,e)||{};if(s==null)return{};const p=At(c),f={x:n,y:o},m=j(r),d=ut(m),h=await l.getDimensions(s),u=m==="y",g=u?"top":"left",w=u?"bottom":"right",y=u?"clientHeight":"clientWidth",x=i.reference[d]+i.reference[m]-f[m]-i.floating[d],R=f[m]-i.reference[m],v=await(l.getOffsetParent==null?void 0:l.getOffsetParent(s));let b=v?v[y]:0;b&&await(l.isElement==null?void 0:l.isElement(v))||(b=a.floating[y]||i.floating[d]);const T=x/2-R/2,S=b/2-h[d]/2-1,C=U(p[g],S),V=U(p[w],S),L=C,$=b-h[d]-V,A=b/2-h[d]/2+T,D=ct(L,A,$),O=K(r)!=null&&A!=D&&i.reference[d]/2-(A<L?C:V)-h[d]/2<0?A<L?L-A:$-A:0;return{[m]:f[m]-O,data:{[m]:D,centerOffset:A-D+O}}}}),Tt=["top","right","bottom","left"];Tt.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Bt={left:"right",right:"left",bottom:"top",top:"bottom"};function nt(t){return t.replace(/left|right|bottom|top/g,e=>Bt[e])}function Mt(t,e,n){n===void 0&&(n=!1);const o=K(t),r=j(t),i=ut(r);let l=r==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(l=nt(l)),{main:l,cross:nt(l)}}const Vt={start:"end",end:"start"};function st(t){return t.replace(/start|end/g,e=>Vt[e])}const Yt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:r,rects:i,initialPlacement:l,platform:a,elements:s}=e,{mainAxis:c=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:h=!0,...u}=M(t,e),g=F(o),w=F(l)===l,y=await(a.isRTL==null?void 0:a.isRTL(s.floating)),x=f||(w||!h?[nt(l)]:function(L){const $=nt(L);return[st(L),$,st($)]}(l));f||d==="none"||x.push(...function(L,$,A,D){const O=K(L);let E=function(N,I,kt){const mt=["left","right"],pt=["right","left"],Ht=["top","bottom"],Ft=["bottom","top"];switch(N){case"top":case"bottom":return kt?I?pt:mt:I?mt:pt;case"left":case"right":return I?Ht:Ft;default:return[]}}(F(L),A==="start",D);return O&&(E=E.map(N=>N+"-"+O),$&&(E=E.concat(E.map(st)))),E}(l,h,d,y));const R=[l,...x],v=await Q(e,u),b=[];let T=((n=r.flip)==null?void 0:n.overflows)||[];if(c&&b.push(v[g]),p){const{main:L,cross:$}=Mt(o,i,y);b.push(v[L],v[$])}if(T=[...T,{placement:o,overflows:b}],!b.every(L=>L<=0)){var S,C;const L=(((S=r.flip)==null?void 0:S.index)||0)+1,$=R[L];if($)return{data:{index:L,overflows:T},reset:{placement:$}};let A=(C=T.filter(D=>D.overflows[0]<=0).sort((D,O)=>D.overflows[1]-O.overflows[1])[0])==null?void 0:C.placement;if(!A)switch(m){case"bestFit":{var V;const D=(V=T.map(O=>[O.placement,O.overflows.filter(E=>E>0).reduce((E,N)=>E+N,0)]).sort((O,E)=>O[1]-E[1])[0])==null?void 0:V[0];D&&(A=D);break}case"initialPlacement":A=l}if(o!==A)return{reset:{placement:A}}}return{}}}};function yt(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function xt(t){return Tt.some(e=>t[e]>=0)}const _t=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:o="referenceHidden",...r}=M(t,e);switch(o){case"referenceHidden":{const i=yt(await Q(e,{...r,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:xt(i)}}}case"escaped":{const i=yt(await Q(e,{...r,altBoundary:!0}),n.floating);return{data:{escapedOffsets:i,escaped:xt(i)}}}default:return{}}}}},jt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,r=await async function(i,l){const{placement:a,platform:s,elements:c}=i,p=await(s.isRTL==null?void 0:s.isRTL(c.floating)),f=F(a),m=K(a),d=j(a)==="x",h=["left","top"].includes(f)?-1:1,u=p&&d?-1:1,g=M(l,i);let{mainAxis:w,crossAxis:y,alignmentAxis:x}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return m&&typeof x=="number"&&(y=m==="end"?-1*x:x),d?{x:y*u,y:w*h}:{x:w*h,y:y*u}}(e,t);return{x:n+r.x,y:o+r.y,data:r}}}};function Et(t){return t==="x"?"y":"x"}const qt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:r}=e,{mainAxis:i=!0,crossAxis:l=!1,limiter:a={fn:g=>{let{x:w,y}=g;return{x:w,y}}},...s}=M(t,e),c={x:n,y:o},p=await Q(e,s),f=j(F(r)),m=Et(f);let d=c[f],h=c[m];if(i){const g=f==="y"?"bottom":"right";d=ct(d+p[f==="y"?"top":"left"],d,d-p[g])}if(l){const g=m==="y"?"bottom":"right";h=ct(h+p[m==="y"?"top":"left"],h,h-p[g])}const u=a.fn({...e,[f]:d,[m]:h});return{...u,data:{x:u.x-n,y:u.y-o}}}}},Gt=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:o,placement:r,rects:i,middlewareData:l}=e,{offset:a=0,mainAxis:s=!0,crossAxis:c=!0}=M(t,e),p={x:n,y:o},f=j(r),m=Et(f);let d=p[f],h=p[m];const u=M(a,e),g=typeof u=="number"?{mainAxis:u,crossAxis:0}:{mainAxis:0,crossAxis:0,...u};if(s){const x=f==="y"?"height":"width",R=i.reference[f]-i.floating[x]+g.mainAxis,v=i.reference[f]+i.reference[x]-g.mainAxis;d<R?d=R:d>v&&(d=v)}if(c){var w,y;const x=f==="y"?"width":"height",R=["top","left"].includes(F(r)),v=i.reference[m]-i.floating[x]+(R&&((w=l.offset)==null?void 0:w[m])||0)+(R?0:g.crossAxis),b=i.reference[m]+i.reference[x]+(R?0:((y=l.offset)==null?void 0:y[m])||0)-(R?g.crossAxis:0);h<v?h=v:h>b&&(h=b)}return{[f]:d,[m]:h}}}},Jt=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:o,platform:r,elements:i}=e,{apply:l=()=>{},...a}=M(t,e),s=await Q(e,a),c=F(n),p=K(n),f=j(n)==="x",{width:m,height:d}=o.floating;let h,u;c==="top"||c==="bottom"?(h=c,u=p===(await(r.isRTL==null?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(u=c,h=p==="end"?"top":"bottom");const g=d-s[h],w=m-s[u],y=!e.middlewareData.shift;let x=g,R=w;if(f){const b=m-s.left-s.right;R=p||y?U(w,b):b}else{const b=d-s.top-s.bottom;x=p||y?U(g,b):b}if(y&&!p){const b=X(s.left,0),T=X(s.right,0),S=X(s.top,0),C=X(s.bottom,0);f?R=m-2*(b!==0||T!==0?b+T:X(s.left,s.right)):x=d-2*(S!==0||C!==0?S+C:X(s.top,s.bottom))}await l({...e,availableWidth:R,availableHeight:x});const v=await r.getDimensions(i.floating);return m!==v.width||d!==v.height?{reset:{rects:!0}}:{}}}};function P(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function k(t){return P(t).getComputedStyle(t)}function $t(t){return t instanceof P(t).Node}function z(t){return $t(t)?(t.nodeName||"").toLowerCase():"#document"}function H(t){return t instanceof P(t).HTMLElement}function W(t){return t instanceof P(t).Element}function wt(t){return typeof ShadowRoot<"u"&&(t instanceof P(t).ShadowRoot||t instanceof ShadowRoot)}function Z(t){const{overflow:e,overflowX:n,overflowY:o,display:r}=k(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(r)}function zt(t){return["table","td","th"].includes(z(t))}function at(t){const e=dt(),n=k(t);return n.transform!=="none"||n.perspective!=="none"||!e&&!!n.backdropFilter&&n.backdropFilter!=="none"||!e&&!!n.filter&&n.filter!=="none"||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function dt(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function rt(t){return["html","body","#document"].includes(z(t))}const ft=Math.min,q=Math.max,ot=Math.round,tt=Math.floor,Y=t=>({x:t,y:t});function Dt(t){const e=k(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const r=H(t),i=r?t.offsetWidth:n,l=r?t.offsetHeight:o,a=ot(n)!==i||ot(o)!==l;return a&&(n=i,o=l),{width:n,height:o,$:a}}function ht(t){return W(t)?t:t.contextElement}function G(t){const e=ht(t);if(!H(e))return Y(1);const n=e.getBoundingClientRect(),{width:o,height:r,$:i}=Dt(e);let l=(i?ot(n.width):n.width)/o,a=(i?ot(n.height):n.height)/r;return l&&Number.isFinite(l)||(l=1),a&&Number.isFinite(a)||(a=1),{x:l,y:a}}const vt=Y(0);function Ot(t,e,n){var o,r;if(e===void 0&&(e=!0),!dt())return vt;const i=t?P(t):window;return!n||e&&n!==i?vt:{x:((o=i.visualViewport)==null?void 0:o.offsetLeft)||0,y:((r=i.visualViewport)==null?void 0:r.offsetTop)||0}}function _(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=ht(t);let l=Y(1);e&&(o?W(o)&&(l=G(o)):l=G(t));const a=Ot(i,n,o);let s=(r.left+a.x)/l.x,c=(r.top+a.y)/l.y,p=r.width/l.x,f=r.height/l.y;if(i){const m=P(i),d=o&&W(o)?P(o):o;let h=m.frameElement;for(;h&&o&&d!==m;){const u=G(h),g=h.getBoundingClientRect(),w=getComputedStyle(h),y=g.left+(h.clientLeft+parseFloat(w.paddingLeft))*u.x,x=g.top+(h.clientTop+parseFloat(w.paddingTop))*u.y;s*=u.x,c*=u.y,p*=u.x,f*=u.y,s+=y,c+=x,h=P(h).frameElement}}return et({width:p,height:f,x:s,y:c})}function B(t){return(($t(t)?t.ownerDocument:t.document)||window.document).documentElement}function lt(t){return W(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Pt(t){return _(B(t)).left+lt(t).scrollLeft}function J(t){if(z(t)==="html")return t;const e=t.assignedSlot||t.parentNode||wt(t)&&t.host||B(t);return wt(e)?e.host:e}function St(t){const e=J(t);return rt(e)?t.ownerDocument?t.ownerDocument.body:t.body:H(e)&&Z(e)?e:St(e)}function it(t,e){var n;e===void 0&&(e=[]);const o=St(t),r=o===((n=t.ownerDocument)==null?void 0:n.body),i=P(o);return r?e.concat(i,i.visualViewport||[],Z(o)?o:[]):e.concat(o,it(o))}function bt(t,e,n){let o;if(e==="viewport")o=function(r,i){const l=P(r),a=B(r),s=l.visualViewport;let c=a.clientWidth,p=a.clientHeight,f=0,m=0;if(s){c=s.width,p=s.height;const d=dt();(!d||d&&i==="fixed")&&(f=s.offsetLeft,m=s.offsetTop)}return{width:c,height:p,x:f,y:m}}(t,n);else if(e==="document")o=function(r){const i=B(r),l=lt(r),a=r.ownerDocument.body,s=q(i.scrollWidth,i.clientWidth,a.scrollWidth,a.clientWidth),c=q(i.scrollHeight,i.clientHeight,a.scrollHeight,a.clientHeight);let p=-l.scrollLeft+Pt(r);const f=-l.scrollTop;return k(a).direction==="rtl"&&(p+=q(i.clientWidth,a.clientWidth)-s),{width:s,height:c,x:p,y:f}}(B(t));else if(W(e))o=function(r,i){const l=_(r,!0,i==="fixed"),a=l.top+r.clientTop,s=l.left+r.clientLeft,c=H(r)?G(r):Y(1);return{width:r.clientWidth*c.x,height:r.clientHeight*c.y,x:s*c.x,y:a*c.y}}(e,n);else{const r=Ot(t);o={...e,x:e.x-r.x,y:e.y-r.y}}return et(o)}function Ct(t,e){const n=J(t);return!(n===e||!W(n)||rt(n))&&(k(n).position==="fixed"||Ct(n,e))}function Rt(t,e){return H(t)&&k(t).position!=="fixed"?e?e(t):t.offsetParent:null}function Lt(t,e){const n=P(t);if(!H(t))return n;let o=Rt(t,e);for(;o&&zt(o)&&k(o).position==="static";)o=Rt(o,e);return o&&(z(o)==="html"||z(o)==="body"&&k(o).position==="static"&&!at(o))?n:o||function(r){let i=J(r);for(;H(i)&&!rt(i);){if(at(i))return i;i=J(i)}return null}(t)||n}function Nt(t,e,n){const o=H(e),r=B(e),i=n==="fixed",l=_(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const s=Y(0);if(o||!o&&!i)if((z(e)!=="body"||Z(r))&&(a=lt(e)),H(e)){const c=_(e,!0,i,e);s.x=c.x+e.clientLeft,s.y=c.y+e.clientTop}else r&&(s.x=Pt(r));return{x:l.left+a.scrollLeft-s.x,y:l.top+a.scrollTop-s.y,width:l.width,height:l.height}}const It={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:r}=t;const i=n==="clippingAncestors"?function(c,p){const f=p.get(c);if(f)return f;let m=it(c).filter(g=>W(g)&&z(g)!=="body"),d=null;const h=k(c).position==="fixed";let u=h?J(c):c;for(;W(u)&&!rt(u);){const g=k(u),w=at(u);w||g.position!=="fixed"||(d=null),(h?!w&&!d:!w&&g.position==="static"&&d&&["absolute","fixed"].includes(d.position)||Z(u)&&!w&&Ct(c,u))?m=m.filter(y=>y!==u):d=g,u=J(u)}return p.set(c,m),m}(e,this._c):[].concat(n),l=[...i,o],a=l[0],s=l.reduce((c,p)=>{const f=bt(e,p,r);return c.top=q(f.top,c.top),c.right=ft(f.right,c.right),c.bottom=ft(f.bottom,c.bottom),c.left=q(f.left,c.left),c},bt(e,a,r));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const r=H(n),i=B(n);if(n===i)return e;let l={scrollLeft:0,scrollTop:0},a=Y(1);const s=Y(0);if((r||!r&&o!=="fixed")&&((z(n)!=="body"||Z(i))&&(l=lt(n)),H(n))){const c=_(n);a=G(n),s.x=c.x+n.clientLeft,s.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-l.scrollLeft*a.x+s.x,y:e.y*a.y-l.scrollTop*a.y+s.y}},isElement:W,getDimensions:function(t){return Dt(t)},getOffsetParent:Lt,getDocumentElement:B,getScale:G,async getElementRects(t){let{reference:e,floating:n,strategy:o}=t;const r=this.getOffsetParent||Lt,i=this.getDimensions;return{reference:Nt(e,await r(n),o),floating:{x:0,y:0,...await i(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>k(t).direction==="rtl"};function Kt(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=!0,layoutShift:a=typeof IntersectionObserver=="function",animationFrame:s=!1}=o,c=ht(t),p=r||i?[...c?it(c):[],...it(e)]:[];p.forEach(u=>{r&&u.addEventListener("scroll",n,{passive:!0}),i&&u.addEventListener("resize",n)});const f=c&&a?function(u,g){let w,y=null;const x=B(u);function R(){clearTimeout(w),y&&y.disconnect(),y=null}return function v(b,T){b===void 0&&(b=!1),T===void 0&&(T=1),R();const{left:S,top:C,width:V,height:L}=u.getBoundingClientRect();if(b||g(),!V||!L)return;const $=tt(C),A=tt(x.clientWidth-(S+V)),D=tt(x.clientHeight-(C+L)),O=tt(S);let E=!0;y=new IntersectionObserver(N=>{const I=N[0].intersectionRatio;if(I!==T){if(!E)return v();I?v(!1,I):w=setTimeout(()=>{v(!1,1e-7)},100)}E=!1},{rootMargin:-$+"px "+-A+"px "+-D+"px "+-O+"px",threshold:q(0,ft(1,T))||1}),y.observe(u)}(!0),R}(c,n):null;let m,d=null;l&&(d=new ResizeObserver(n),c&&!s&&d.observe(c),d.observe(e));let h=s?_(t):null;return s&&function u(){const g=_(t);!h||g.x===h.x&&g.y===h.y&&g.width===h.width&&g.height===h.height||n(),h=g,m=requestAnimationFrame(u)}(),n(),()=>{p.forEach(u=>{r&&u.removeEventListener("scroll",n),i&&u.removeEventListener("resize",n)}),f&&f(),d&&d.disconnect(),d=null,s&&cancelAnimationFrame(m)}}const Qt=(t,e,n)=>{const o=new Map,r={platform:It,...n},i={...r.platform,_c:o};return Wt(t,e,{...r,platform:i})};export{Yt as A,Kt as B,Jt as C,_t as E,jt as L,Qt as N,qt as O,Gt as a,Xt as g};
