import { Canvas, ArgTypes } from '@storybook/blocks';
import { Meta } from '@storybook/addon-docs/blocks';
import { CodeInput } from './codeInput.component';

import * as CodeInputStories from './codeInput.stories';

<Meta title="Components/Code Input" component={CodeInput} />

# Code input

The `CodeInput` is a text input where the value is split between multiple inputs, where focus is automatically moved between them as the user edits.

<Canvas of={CodeInputStories.Default} layout="centered" sourceState="none" />

```tsx
import { useForm, Button } from '@rocketmakers/armstrong';

const { formProp } = useForm({ code: '' });

<CodeInput bind={formProp('code').bind()} parts={[1, 1, 1]} />;
<p>Value: {formState?.code}</p>;
```

## Code input Props

<ArgTypes of={CodeInput} />

## Examples

- [Basic example](#basic)
- [With text between or different size inputs](#text-between-and-sizes)
- [`displaySize`](#displaySize)
- [`overlay`](#overlay)
- [`validationError`](#validationError)

<br />

### <a name="basic">Basic example</a>

<Canvas of={CodeInputStories.Default} layout="centered" sourceState="none" />

```tsx
const { formProp, formState } = useForm({ code: '' });

<CodeInput bind={formProp('code').bind()} parts={[1, 1, 1]} />;
<p>Value: {formState?.code}</p>;
```

The `bind` prop is used for binding to an Armstrong form binder (see forms documentation).

The `parts` prop represents the length of the input. In this example, the `CodeInput` is made of three parts containing one character each.

<br />

### <a name="text-between-and-sizes">With text between or different size inputs</a>

<Canvas of={CodeInputStories.WithTextBetween} layout="centered" sourceState="none" />

```tsx
<CodeInput bind={formProp('code').bind()} parts={[4, '-', 4, '-', 4]} />
```

In this example the `parts` prop includes strings representing a piece of text in-between inputs, and each input accepts 2 characters.

<br />

### <a name="displaySize">`displaySize`</a>

<Canvas of={CodeInputStories.Sizes} layout="centered" sourceState="none" />

```tsx
<CodeInput bind={formProp('code').bind()} parts={[1, 1, 1]} displaySize="small" />
```

Size options:

- `small`
- `medium` (default)
- `large`
- `custom-<string>`

<br />

### <a name="overlay">`overlay`</a>

`leftOverlay` and `rightOverlay` as props add overlays on the sides of the `CodeInput`.

`leftOverlay` and `rightOverlay` inside the `parts` props adds overlays to the part itself.

<Canvas of={CodeInputStories.WithOverlays} layout="centered" sourceState="none" />

```tsx
<CodeInput
  bind={formProp('code').bind()}
  parts={[
    1,
    {
      length: 1,
      rightOverlay: '+',
      leftOverlay: '+',
    },
    ,
    1,
  ]}
  rightOverlay="+"
/>
```

<br />

### <a name="validationError">`validationError`</a>

The `label` prop displays a `<label>` on top of the component.

The `required` prop displays a required indicator at the end of the label.

The `validationErrorMessages` takes an array of error messages to display on validation error.

<Canvas of={CodeInputStories.ValidationError} layout="centered" sourceState="none" />

```tsx
<CodeInput
  bind={formProp('code').bind()}
  label="Code input"
  parts={[2, '-', 2, '-', 2]}
  validationErrorMessages={['Input is invalid']}
  required={true}
/>
```
